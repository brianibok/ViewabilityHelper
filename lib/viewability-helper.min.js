!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("viewability-helper",[],t):"object"==typeof exports?exports["viewability-helper"]=t():e["viewability-helper"]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return o(e,null,[{key:"addDomEvent",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&"function"==typeof e.attachEvent&&e.attachEvent("on"+t,function(){n.call(e)})}},{key:"removeDomEvent",value:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!0):e.detachEvent&&e.detachEvent("on"+t,n)}}]),e}(),s=function(){function e(){var t=this;i(this,e),this.viewPortSize={height:0,width:0},this.setViewPortSizeGlobal(),r.addDomEvent(window,"resize",function(){t.setViewPortSizeGlobal()})}return o(e,[{key:"setViewPortSizeGlobal",value:function(){var e=void 0,t=void 0,n=void 0,i=void 0;i={height:0,width:0},e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,n=!1===e&&!1===t,e?(i.height=window.innerHeight,i.width=window.innerWidth):t?(i.height=document.documentElement.clientHeight,i.width=document.documentElement.clientWidth):n&&(i.height=document.getElementsByTagName("body")[0].clientHeight,i.width=document.getElementsByTagName("body")[0].clientWidth),this.viewPortSize=i}},{key:"getViewportSizeGlobal",value:function(){return this.viewPortSize}},{key:"isInViewport",value:function(e,t){if(!e||t<0||t>100)return!1;var n=e.getBoundingClientRect(),i=this.getViewportSizeGlobal().height,o=e.clientHeight,r=void 0;return r=Math.round(o*t/100),r=r>i?i-1:r,n.top+r<=i&&n.bottom-r>=0}}]),e}(),l=function(){function e(t,n,o){i(this,e),this._element=t,this._callback=n,this.posCalcObj=null,this.elementIsViewed=!1,this.posScrollLock=!1,this.hasIntersectionObserverSupport="function"==typeof window.IntersectionObserver,this.options={callbackParams:[],rootMargin:"0px",intersectPercentage:0,scrollDimmer:200,unobserve:!1,threshold:[1]};for(var r in o)o.hasOwnProperty(r)&&(this.options[r]=o[r])}return o(e,[{key:"windowScrolled",value:function(){var e=this;this.posScrollLock||(this.searchForExposedElement(),setTimeout(function(){e.posScrollLock=!1},this.options.scrollDimmer),this.posScrollLock=!0)}},{key:"searchForExposedElement",value:function(){this.posCalcObj.isInViewport(this._element,this.options.intersectPercentage)?this.elementIsViewed||(this.elementIsViewed=!0,this._callback.apply(this,this.options.callbackParams),this.options.unobserve&&(this.Helpers.removeDomEvent(window,"scroll",this.windowScrolled),delete this.posCalcObj)):this.elementIsViewed=!1}},{key:"observeElement",value:function(){var e={rootMargin:this.options.rootMargin,threshold:this.options.threshold};new window.IntersectionObserver(this.observerCallback.bind(this),e).observe(this._element)}},{key:"observerCallback",value:function(e,t){e&&e[0]&&e[0].intersectionRatio>this.options.intersectPercentage&&(this._callback.apply(this,this.options.callbackParams),this.options.unobserve&&(t.unobserve(e[0].target),t.disconnect()))}},{key:"observe",value:function(){this.hasIntersectionObserverSupport?this.observeElement():(this.posCalcObj=new s,r.addDomEvent(window,"scroll",this.windowScrolled),this.windowScrolled())}}]),e}();t.default=l,e.exports=t.default}])});