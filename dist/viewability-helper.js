"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(){window.ViewabilityHelper=function(){function e(t,i,n){_classCallCheck(this,e),this._element=t,this._callback=i,this.posCalcObj=null,this.elementIsViewed=!1,this.posScrollLock=!1,this.hasIntersectionObserverSupport="function"==typeof window.IntersectionObserver,this.options={callbackParams:[],rootMargin:"0px",intersectPercentage:0,scrollDimmer:200,unobserve:!1,threshold:[1]};for(var o in n)n.hasOwnProperty(o)&&(this.options[o]=n[o])}return _createClass(e,[{key:"windowScrolled",value:function(){var e=this;this.posScrollLock||(this.searchForExposedElement(),setTimeout(function(){e.posScrollLock=!1},this.options.scrollDimmer),this.posScrollLock=!0)}},{key:"searchForExposedElement",value:function(){this.posCalcObj.isInViewport(this._element,this.options.intersectPercentage)?this.elementIsViewed||(this.elementIsViewed=!0,this._callback.apply(this,this.options.callbackParams),this.options.unobserve&&(this.Helpers.removeDomEvent(window,"scroll",this.windowScrolled),delete this.posCalcObj)):this.elementIsViewed=!1}},{key:"observeElement",value:function(){var e={rootMargin:this.options.rootMargin,threshold:this.options.threshold};new window.IntersectionObserver(this.observerCallback.bind(this),e).observe(this._element)}},{key:"observerCallback",value:function(e,t){e&&e[0]&&e[0].intersectionRatio>this.options.intersectPercentage&&(this._callback.apply(this,this.options.callbackParams),this.options.unobserve&&(t.unobserve(e[0].target),t.disconnect()))}},{key:"observe",value:function(){this.hasIntersectionObserverSupport?this.observeElement():(this.posCalcObj=new window.ViewabilityHelper.PositionCalculation,window.ViewabilityHelper.Helpers.addDomEvent(window,"scroll",this.windowScrolled),this.windowScrolled())}}]),e}(),window.ViewabilityHelper.Helpers=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"addDomEvent",value:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!0):e.attachEvent&&"function"==typeof e.attachEvent&&e.attachEvent("on"+t,function(){i.call(e)})}},{key:"removeDomEvent",value:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!0):e.detachEvent&&e.detachEvent("on"+t,i)}}]),e}(),window.ViewabilityHelper.PositionCalculation=function(){function e(){var t=this;_classCallCheck(this,e),this.viewPortSize={height:0,width:0},this.setViewPortSizeGlobal(),window.ViewabilityHelper.Helpers.addDomEvent(window,"resize",function(){t.setViewPortSizeGlobal()})}return _createClass(e,[{key:"setViewPortSizeGlobal",value:function(){var e=void 0,t=void 0,i=void 0,n=void 0;n={height:0,width:0},e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,i=!1===e&&!1===t,e?(n.height=window.innerHeight,n.width=window.innerWidth):t?(n.height=document.documentElement.clientHeight,n.width=document.documentElement.clientWidth):i&&(n.height=document.getElementsByTagName("body")[0].clientHeight,n.width=document.getElementsByTagName("body")[0].clientWidth),this.viewPortSize=n}},{key:"getViewportSizeGlobal",value:function(){return this.viewPortSize}},{key:"isInViewport",value:function(e,t){if(!e||t<0||t>100)return!1;var i=e.getBoundingClientRect(),n=this.getViewportSizeGlobal().height,o=e.clientHeight,s=void 0;return s=Math.round(o*t/100),s=s>n?n-1:s,i.top+s<=n&&i.bottom-s>=0}}]),e}()}();